---
// src/components/SvgLoader.astro
import { parse } from 'node-html-parser';

const files = import.meta.glob('/public/assets/images/*.svg', { query: '?raw', import: 'default' });

export interface Props {
  src: string;
  alt: string;
  className?: string;
}

const { src, alt, className } = Astro.props;

if (!(src in files)) {
  throw new Error(`${src} not found`);
}

const svgContent = await files[src]();

const root = parse(svgContent);
const svgElement = root.querySelector('svg');
const { attributes, innerHTML } = svgElement;

const svgAttributes = {
  ...attributes,
  class: className || attributes.class,
  'aria-label': alt,
};
---

<svg {...svgAttributes} set:html={innerHTML} />
